{"version":3,"sources":["webpack:///webpack/bootstrap 21ee1b4f3b304da18887","webpack:///./src/enums/PostMessageEventNamesEnum.js","webpack:///./src/enums/WarningTextEnum.js","webpack:///./src/utils/tab.js","webpack:///./src/utils/array.js","webpack:///./src/enums/TabStatusEnum.js","webpack:///./src/utils/dom.js","webpack:///./src/index.js","webpack:///./src/parent.js","webpack:///./src/tab.js","webpack:///./src/vendor/uuid.js","webpack:///./src/event-listeners/postmessage.js","webpack:///./src/utils/customEventPolyfill.js","webpack:///./src/child.js"],"names":["PostMessageEventNamesEnum","LOADED","CUSTOM","HANDSHAKE","ON_BEFORE_UNLOAD","PARENT_DISCONNECTED","HANDSHAKE_WITH_PARENT","PARENT_COMMUNICATED","WarningTextEnum","INVALID_JSON","INVALID_DATA","CONFIG_REQUIRED","CUSTOM_EVENT","URL_REQUIRED","tabUtils","tabs","config","_remove","tab","index","searchByKeyName","id","splice","_preProcessMessage","msg","JSON","stringify","e","Error","indexOf","addNew","push","getOpened","filter","status","OPEN","getClosed","CLOSE","getAll","closeTab","ref","close","closeAll","i","length","broadCastAll","isSiteInsideFrame","sendMessage","broadCastTo","targetedTab","target","origin","postMessage","top","arrayUtils","returnPreferenceEnum","INDEX","OBJECT","BOTH","data","key","value","returnPreference","obj","returnData","isNaN","parseInt","TabStatusEnum","domUtils","disable","selector","ATOpenerElems","document","querySelectorAll","setAttribute","enable","removeAttribute","AcrossTabs","Parent","Child","heartBeat","heartBeatInterval","shouldInitImmediately","Tab","init","openedTabs","window","clearInterval","removeClosedTabs","watchStatus","closed","onPollingCallback","setInterval","addInterval","newStatus","oldStatus","ev","onChildDisconnect","detail","enableElements","type","onHandshakeCallback","tabInfo","onChildCommunication","removeEventListener","onNewTab","addEventListener","customEventUnListener","onChildUnload","onbeforeunload","url","create","startPollingTabs","addEventListeners","name","generate","open","windowFeatures","newlyTabOpened","windowName","UUID","rand","_getRandomInt","hex","_hexAligner","x","NaN","Math","random","_getIntAligner","radix","num","str","toString","z","prototype","hexString","PostMessageListener","_onLoad","dataToSend","split","parse","parentName","_onCustomMessage","event","eventData","CustomEvent","dispatchEvent","_onBeforeUnload","message","CE","params","evt","createEvent","initCustomEvent","Event","sessionStorageKey","handshakeExpiryLimit","tabName","tabId","tabParentName","sessionStorage","isSessionStorageSupported","getItem","dataReceived","setItem","storedData","_getData","_parseData","actualData","clearTimeout","timeout","onParentDisconnect","onCommunication","_setData","sendMessageToParent","onInitialize","onParentCommunication","setTimeout","onHandShakeExpiry","_prefixType","opener","_isSessionStorage","addListeners","_restoreData","getTabInfo","setHandshakeExpiry","onReady"],"mappings":"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","file":"across-tabs.this.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 21ee1b4f3b304da18887","/**\n * Enum for different event names used for tab-communication\n * @type {Object}\n */\nconst PostMessageEventNamesEnum = {\n\tLOADED: '__TAB__LOADED_EVENT__',\n\tCUSTOM: '__TAB__CUSTOM_EVENT__',\n\tHANDSHAKE: '__TAB__HANDSHAKE_EVENT__',\n\tON_BEFORE_UNLOAD: '__TAB__ON_BEFORE_UNLOAD__',\n\tPARENT_DISCONNECTED: '__PARENT_DISCONNECTED__',\n\tHANDSHAKE_WITH_PARENT: '__HANDSHAKE_WITH_PARENT__',\n\tPARENT_COMMUNICATED: '__PARENT_COMMUNICATED__'\n};\n\nexport default PostMessageEventNamesEnum;\n\n\n\n// WEBPACK FOOTER //\n// ./src/enums/PostMessageEventNamesEnum.js","/**\n * Enum for showing various warnings to suser when things done wrong\n * @type {Object}\n */\nconst WarningTextEnum = {\n\tINVALID_JSON: 'Invalid JSON Object!',\n\tINVALID_DATA: 'Some wrong message is being sent by Parent.',\n\tCONFIG_REQUIRED: 'Configuration options required. Please read docs.',\n\tCUSTOM_EVENT: 'CustomEvent(and it\\'s polyfill) is not supported in this browser.',\n\tURL_REQUIRED: 'Url is needed for creating and opening a new window/tab. Please read docs.'\n};\n\nexport default WarningTextEnum;\n\n\n\n// WEBPACK FOOTER //\n// ./src/enums/WarningTextEnum.js","/**\n * A Tab utility file to deal with tab operations\n */\n\nimport PostMessageEventNamesEnum from '../enums/PostMessageEventNamesEnum';\nimport arrayUtils from './array';\nimport TabStatusEnum from '../enums/TabStatusEnum';\nimport WarningTextEnum from '../enums/WarningTextEnum';\n\nlet tabUtils = {\n\ttabs: [],\n\tconfig: {}\n};\n\n/**\n * Remove a tab from a list of all tabs.\n * This is required when users opts for removing the closed tabs from the list of tabs.\n * This can be done explictly by passing `removeClosedTabs` key while instantiating Parent.\n * @param  {Object} tab\n */\ntabUtils._remove = (tab) => {\n\tlet index;\n\n\tindex = arrayUtils.searchByKeyName(tabUtils.tabs, 'id', tab.id, 'index');\n\ttabUtils.tabs.splice(index, 1);\n};\n\n/**\n * As explained in `event-listeners/postmessage.js` file,\n * the data received from postmessage API is further processed based on our convention\n * @param  {String} msg\n * @return {String} modified msg\n */\ntabUtils._preProcessMessage = (msg) => {\n\t// make msg always an object to support JSON support\n\ttry {\n\t\tmsg = JSON.stringify(msg);\n\t} catch (e) {\n\t\tthrow new Error(WarningTextEnum.INVALID_JSON);\n\t}\n\n\tif (msg.indexOf(PostMessageEventNamesEnum.PARENT_COMMUNICATED) === -1) {\n\t\tmsg = PostMessageEventNamesEnum.PARENT_COMMUNICATED + msg;\n\t}\n\n\treturn msg;\n};\n/**\n * Add a new tab to the Array of tabs\n * @param  {Object} tab\n * @return {Object} - this\n */\ntabUtils.addNew = (tab) => {\n\ttabUtils.tabs.push(tab);\n\treturn this;\n};\n/**\n * Filter out all the opened tabs\n * @return {Array} - only the opened tabs\n */\ntabUtils.getOpened = () => {\n\treturn tabUtils.tabs.filter(tab => tab.status === TabStatusEnum.OPEN);\n};\n/**\n * Filter out all the closed tabs\n * @return {Array} - only the closed tabs\n */\ntabUtils.getClosed = () => {\n\treturn tabUtils.tabs.filter(tab => tab.status === TabStatusEnum.CLOSE);\n};\n/**\n * To get list of all tabs(closed/opened).\n * Note: Closed tabs will not be returned if `removeClosedTabs` key is paased while instantiaiting Parent.\n * @return {Array} - list of all tabs\n */\ntabUtils.getAll = () => {\n\treturn tabUtils.tabs;\n};\n\n/**\n * Close a specific tab\n * @param  {String} id\n * @return {Object} this\n */\ntabUtils.closeTab = (id) => {\n\tlet tab = arrayUtils.searchByKeyName(tabUtils.tabs, 'id', id);\n\n\tif (tab && tab.ref) {\n\t\ttab.ref.close();\n\t\ttab.status = TabStatusEnum.CLOSE;\n\t}\n\n\treturn tabUtils;\n\t// --tabUtils.tabs.length;\n};\n/**\n * Close all opened tabs using a native method `close` available on window.open reference.\n * @return {tabUtils} this\n */\ntabUtils.closeAll = () => {\n\tlet i;\n\n\tfor (i = 0; i < tabUtils.tabs.length; i++) {\n\t\tif (tabUtils.tabs[i] && tabUtils.tabs[i].ref) {\n\t\t\ttabUtils.tabs[i].ref.close();\n\t\t\ttabUtils.tabs[i].status = TabStatusEnum.CLOSE;\n\t\t}\n\t}\n\n\treturn tabUtils;\n};\n/**\n * Send a postmessage to every opened Child tab(excluding itself i.e Parent Tab)\n * @param  {String} msg\n * @param  {Boolean} isSiteInsideFrame\n */\ntabUtils.broadCastAll = (msg, isSiteInsideFrame) => {\n\tlet i, tabs = tabUtils.getOpened();\n\n\tmsg = tabUtils._preProcessMessage(msg);\n\n\tfor (i = 0; i < tabs.length; i++) {\n\t\ttabUtils.sendMessage(tabs[i], msg, isSiteInsideFrame);\n\t}\n\n\treturn tabUtils;\n};\n/**\n * Send a postmessage to a specific Child tab\n * @param  {String} id\n * @param  {String} msg\n * @param  {Boolean} isSiteInsideFrame\n */\ntabUtils.broadCastTo = (id, msg, isSiteInsideFrame) => {\n\tlet targetedTab,\n\t\ttabs = tabUtils.getAll();\n\n\tmsg = tabUtils._preProcessMessage(msg);\n\n\ttargetedTab = arrayUtils.searchByKeyName(tabs, 'id', id); // TODO: tab.id\n\ttabUtils.sendMessage(targetedTab, msg, isSiteInsideFrame);\n\n\treturn tabUtils;\n};\n\n/**\n * Send a postMessage to the desired window/frame\n * @param  {Object}  target\n * @param  {String}  msg\n * @param  {Boolean} isSiteInsideFrame\n */\ntabUtils.sendMessage = (target, msg, isSiteInsideFrame) => {\n\tlet origin = tabUtils.config.origin || '*';\n\n\tif (isSiteInsideFrame && target.ref[0]) {\n\t\ttarget.ref[0].postMessage(msg, origin);\n\t} else if (target.ref && target.ref.top) {\n\t\ttarget.ref.top.postMessage(msg, origin);\n\t}\n};\n\nexport default tabUtils;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/tab.js","let arrayUtils = {};\n\n/**\n * Different type of data needed after searching an item(Object) within data(Array of Objects).\n * 1. `INDEX` returns just the index at which the item was present\n * 2. `OBJECT` returns the matched object\n * 3. `BOTH` returns an object { obj: matched_object, index: index_found }\n */\nlet returnPreferenceEnum = {\n\tINDEX: 'index',\n\tOBJECT: 'object',\n\tBOTH: 'both'\n};\n\n/**\n * Search for an item(Object) within a data-set(Array Of Objects)\n * @param  {Array of Objects} data\n * @param  {String} key - Unique key to search on the basis of\n * @param  {String} value - The matching criteria\n * @param  {String} returnPreference - what kind of output is needed\n * @return {Object}\n */\narrayUtils.searchByKeyName = (data, key, value, returnPreference) => {\n\tif (!data || !key) { return false; }\n\n\treturnPreference = returnPreference || returnPreferenceEnum[1]; // default to Object\n\tlet i, obj, returnData, index = -1;\n\n\tfor (i = 0; i < data.length; i++) {\n\t\tobj = data[i];\n\t\t// Number matching support\n\t\tif (!isNaN(value) && parseInt(obj[key], 10) === parseInt(value, 10)) {\n\t\t\tindex = i;\n\t\t\tbreak;\n\t\t} else if (isNaN(value) && obj[key] === value) { // String exact matching support\n\t\t\tindex = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (index === -1) { // item not found\n\t\tdata[index] = {}; // for consistency\n\t}\n\n\tswitch (returnPreference) {\n\t\tcase returnPreferenceEnum.INDEX:\n\t\t\treturnData = index;\n\t\t\tbreak;\n\t\tcase returnPreferenceEnum.BOTH:\n\t\t\treturnData = {\n\t\t\t\tobj: data[index],\n\t\t\t\tindex: index\n\t\t\t};\n\t\t\tbreak;\n\t\tcase returnPreferenceEnum.OBJECT:\n\t\tdefault:\n\t\t\treturnData = data[index];\n\t\t\tbreak;\n\t}\n\n\treturn returnData;\n};\n\nexport default arrayUtils;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/array.js","/**\n * Enum for Tab status(still opened / closed) used for tab-communication\n * @type {Object}\n */\nconst TabStatusEnum = {\n\tOPEN: 'open',\n\tCLOSE: 'close'\n};\n\nexport default TabStatusEnum;\n\n\n\n// WEBPACK FOOTER //\n// ./src/enums/TabStatusEnum.js","/**\n * This utility helps enabling/disabling the Link/Button on the Parent Tab.\n * As soon as, user clicks on link/btn to open a new tab, the link/btn gets disabled.\n * Once child communicates for the first time with the Parent, the link/btn is re-enabled to open up new tab.\n * This feature is toggleable and can be used explicitly putting a data attribute on the link/btn.\n *\n * <a href=\"/demo.html\" data-tab-opener=\"parent\" target=\"_blank\" on-click=\"parent.openNewTab(config)\">Open Tab</a>\n */\nlet domUtils = {\n\tdisable: (selector) => {\n\t\tif (!selector) { return false; }\n\n\t\tlet i, ATOpenerElems = document.querySelectorAll('[' + selector + ']');\n\n\t\tfor (i = 0; i < ATOpenerElems.length; i++) {\n\t\t\tATOpenerElems[i].setAttribute('disabled', 'disabled');\n\t\t}\n\t},\n\tenable: (selector) => {\n\t\tif (!selector) { return false; }\n\n\t\tlet i, ATOpenerElems = document.querySelectorAll('[' + selector + ']');\n\n\t\tfor (i = 0; i < ATOpenerElems.length; i++) {\n\t\t\tATOpenerElems[i].removeAttribute('disabled');\n\t\t}\n\t}\n};\n\nexport default domUtils;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/dom.js","import Parent from './parent';\nimport Child from './child';\n\n/**\n * Expose Parent and Child modules on AcrossTabs Object\n * @type {Object}\n */\nconst AcrossTabs = {\n\tParent: Parent,\n\tChild: Child\n};\n\nexport default AcrossTabs;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Tab from './tab';\n\nimport tabUtils from './utils/tab';\nimport domUtils from './utils/dom';\n\nimport TabStatusEnum from './enums/TabStatusEnum';\nimport WarningTextEnum from './enums/WarningTextEnum';\nimport PostMessageEventNamesEnum from './enums/PostMessageEventNamesEnum';\n\nimport PostMessageListener from './event-listeners/postmessage';\n\nlet heartBeat, tab;\n\n// Named Class expression\nclass Parent {\n\t/**\n   * Involed when object is instantiated\n   * Set flags/variables and calls init method to attach event listeners\n   * @param  {Object} config - Refer API/docs for config keys\n   */\n\tconstructor(config) {\n\t\tconfig = config || {};\n\t\tif (typeof config.heartBeatInterval === 'undefined') {\n\t\t\tconfig.heartBeatInterval = 500;\n\t\t}\n\t\tif (typeof config.shouldInitImmediately === 'undefined') {\n\t\t\tconfig.shouldInitImmediately = true;\n\t\t}\n\n\t\t// reset tabs with every new Object\n\t\ttabUtils.tabs = [];\n\n\t\tthis.Tab = Tab;\n\t\tObject.assign(this, config);\n\n\t\ttabUtils.config = config;\n\n\t\tif (this.shouldInitImmediately) {\n\t\t\tthis.init();\n\t\t}\n\t};\n\n\taddInterval() {\n\t\tlet i,\n\t\t\ttabs = tabUtils.getAll(),\n\t\t\topenedTabs = tabUtils.getOpened();\n\n\t\t// don't poll if all tabs are in CLOSED states\n\t\tif (!openedTabs || !openedTabs.length) {\n\t\t\twindow.clearInterval(heartBeat); // stop the interval\n\t\t\theartBeat = null;\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (i = 0; i < tabs.length; i++) {\n\t\t\tif (this.removeClosedTabs) {\n\t\t\t\tthis.watchStatus(tabs[i]);\n\t\t\t}\n\t\t\t/**\n       * The check is required since tab would be removed when closed(in case of `removeClosedTabs` flag),\n       * irrespective of heatbeat controller\n      */\n\t\t\tif (tabs[i] && tabs[i].ref) {\n\t\t\t\ttabs[i].status = tabs[i].ref.closed ? TabStatusEnum.CLOSE : TabStatusEnum.OPEN;\n\t\t\t}\n\t\t}\n\n\t\t// Call the user-defined callback after every polling operation is operted in a single run\n\t\tif (this.onPollingCallback) {\n\t\t\tthis.onPollingCallback();\n\t\t}\n\t};\n\n\t/**\n   * Poll all tabs for their status - OPENED / CLOSED\n   * An interval is created which checks for last and current status.\n   * There's a property on window i.e. `closed` which returns true for the closed window.\n   * And one can see `true` only in another tab when the tab was opened by the same `another` tab.\n   */\n\tstartPollingTabs() {\n\t\theartBeat = window.setInterval(() => this.addInterval(), this.heartBeatInterval);\n\t};\n\n\t/**\n   * Compare tab status - OPEN vs CLOSE\n   * @param  {Object} tab\n   */\n\twatchStatus(tab) {\n\t\tif (!tab || !tab.ref) { return false; }\n\t\tlet newStatus = tab.ref.closed ? TabStatusEnum.CLOSE : TabStatusEnum.OPEN,\n\t\t\toldStatus = tab.status;\n\n\t\t// If last and current status(inside a polling interval) are same, don't do anything\n\t\tif (!newStatus || newStatus === oldStatus) { return false; }\n\n\t\t// OPEN to CLOSE state\n\t\tif (oldStatus === TabStatusEnum.OPEN && newStatus === TabStatusEnum.CLOSE) {\n\t\t\t// remove tab from tabUtils\n\t\t\ttabUtils._remove(tab);\n\t\t}\n\t\t// Change from CLOSE to OPEN state is never gonna happen ;)\n\t};\n\n\t/**\n   * Called when a child is refreshed/closed\n   * @param  {Object} ev - Event\n   */\n\tonChildUnload(ev) {\n\t\tif (this.onChildDisconnect) {\n\t\t\tthis.onChildDisconnect(ev.detail);\n\t\t}\n\t}\n\n\t/**\n   * Enable link/btn, which got disabled on clicking.\n   * Note: works only when `data-tab-opener=\"child\"` is used on the respective element\n   * @param  {Object} ev - Event\n   */\n\tcustomEventUnListener(ev) {\n\t\tthis.enableElements();\n\n\t\tif (ev.detail && ev.detail.type === PostMessageEventNamesEnum.HANDSHAKE && this.onHandshakeCallback) {\n\t\t\tthis.onHandshakeCallback(ev.detail.tabInfo);\n\t\t} else if (ev.detail && ev.detail.type === PostMessageEventNamesEnum.CUSTOM && this.onChildCommunication) {\n\t\t\tthis.onChildCommunication(ev.detail.tabInfo);\n\t\t}\n\t};\n\n\t/**\n   * Attach postmessage, native and custom listeners to the window\n   */\n\taddEventListeners() {\n\t\twindow.removeEventListener('message', PostMessageListener.onNewTab);\n\t\twindow.addEventListener('message', PostMessageListener.onNewTab);\n\n\t\twindow.removeEventListener('onCustomChildMessage', this.customEventUnListener);\n\t\twindow.addEventListener('onCustomChildMessage', ev => this.customEventUnListener(ev));\n\n\t\twindow.removeEventListener('onChildUnload', this.onChildUnload);\n\t\twindow.addEventListener('onChildUnload', ev => this.onChildUnload(ev));\n\n\t\t// Let children tabs know when Parent is closed / refereshed.\n\t\twindow.onbeforeunload = () => {\n\t\t\ttabUtils.broadCastAll(PostMessageEventNamesEnum.PARENT_DISCONNECTED);\n\t\t};\n\t};\n\n\t/**\n   * API methods exposed for Public\n   *\n   * Re-enable the link/btn which got disabled on clicking\n   */\n\tenableElements() {\n\t\tdomUtils.enable('data-tab-opener');\n\t};\n\n\t/**\n   * Return list of all tabs\n   * @return {Array}\n   */\n\tgetAllTabs() {\n\t\treturn tabUtils.getAll();\n\t};\n\n\t/**\n   * Return list of all OPENED tabs\n   * @return {Array}\n   */\n\tgetOpenedTabs() {\n\t\treturn tabUtils.getOpened();\n\t};\n\n\t/**\n   * Return list of all CLOSED tabs\n   * @return {Array}\n   */\n\tgetClosedTabs() {\n\t\treturn tabUtils.getClosed();\n\t}\n\n\t/**\n   * Close all tabs at once\n   * @return {Object}\n   */\n\tcloseAllTabs() {\n\t\treturn tabUtils.closeAll();\n\t};\n\n\t/**\n   * Close a specific tab\n   * @return {Object}\n   */\n\tcloseTab(id) {\n\t\treturn tabUtils.closeTab(id);\n\t};\n\n\t/**\n   * Send a postmessage to all OPENED tabs\n   * @return {Object}\n   */\n\tbroadCastAll(msg) {\n\t\treturn tabUtils.broadCastAll(msg);\n\t}\n\n\t/**\n   * Send a postmessage to a specific tab\n   * @return {Object}\n   */\n\tbroadCastTo(id, msg) {\n\t\treturn tabUtils.broadCastTo(id, msg);\n\t}\n\n\t/**\n   * Open a new tab. Config has to be passed with some required keys\n   * @return {Object} tab\n   */\n\topenNewTab(config) {\n\t\tif (!config) {\n\t\t\tthrow new Error(WarningTextEnum.CONFIG_REQUIRED);\n\t\t}\n\n\t\tlet url = config.url;\n\n\t\tif (!url) {\n\t\t\tthrow new Error(WarningTextEnum.URL_REQUIRED);\n\t\t}\n\n\t\ttab = new this.Tab();\n\t\ttab.create(config);\n\n\t\t// If polling is already there, don't set it again\n\t\tif (!heartBeat) {\n\t\t\tthis.startPollingTabs();\n\t\t}\n\n\t\treturn tab;\n\t};\n\n\t/**\n   * API methods exposed for Public ends here\n   **/\n\n\t/**\n   * Invoked on object instantiation unless user pass a key to call it explicitly\n   */\n\tinit() {\n\t\tthis.addEventListeners();\n\t};\n};\n\nexport default Parent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/parent.js","import tabUtils from './utils/tab';\nimport UUID from './vendor/uuid';\nimport domUtils from './utils/dom';\n\n// Named Class expression\nclass Tab {\n\t/**\n   * Invoked when the object is instantiated\n   */\n\tconstructor() {\n\t\t// Set name of Parent tab if not already defined\n\t\twindow.name = window.name || 'PARENT_TAB';\n\t};\n\t/**\n   * Open a new tab\n   * @param  {Object} config - Refer API for config keys\n   * @return {Object} this\n   */\n\tcreate(config) {\n\t\tconfig = config || {};\n\t\tObject.assign(this, config);\n\t\tthis.id = UUID.generate() || (tabUtils.tabs.length + 1);\n\t\tthis.status = 'open';\n\t\t// Refere https://developer.mozilla.org/en-US/docs/Web/API/Window/open#Window_features for WindowFeatures\n\t\tthis.ref = window.open(\n\t\t\tthis.url,\n\t\t\t'_blank',\n\t\t\tconfig.windowFeatures);\n\n\t\tdomUtils.disable('data-tab-opener');\n\n\t\twindow.newlyTabOpened = {\n\t\t\tid: this.id,\n\t\t\tname: this.name || this.windowName,\n\t\t\tref: this.ref\n\t\t};\n\n\t\t// Push it to the list of tabs\n\t\ttabUtils.addNew(this);\n\n\t\t// Return reference for chaining purpose\n\t\treturn this;\n\t};\n};\n\nexport default Tab;\n\n\n\n// WEBPACK FOOTER //\n// ./src/tab.js","/**\n * UUID.js: The RFC-compliant UUID generator for JavaScript.\n * ES6 port of only `generate` method of UUID by Varun Malhotra under MIT License\n *\n * @author  LiosK\n * @version v3.3.0\n * @license The MIT License: Copyright (c) 2010-2016 LiosK.\n */\n\n/** @constructor */\nlet UUID;\n\nUUID = (function () {\n\t'use strict';\n\n\t/** @lends UUID */\n\tfunction UUID() {}\n\n\t/**\n   * The simplest function to get an UUID string.\n   * @returns {string} A version 4 UUID string.\n   */\n\tUUID.generate = function () {\n\t\tlet rand = UUID._getRandomInt, hex = UUID._hexAligner;\n\n\t\t// [\"timeLow\", \"timeMid\", \"timeHiAndVersion\", \"clockSeqHiAndReserved\", \"clockSeqLow\", \"node\"]\n\t\treturn hex(rand(32), 8) + // time_low\n\t\t\t\t\t\t'-' +\n\t\t\t\t\t\thex(rand(16), 4) + // time_mid\n\t\t\t\t\t\t'-' +\n\t\t\t\t\t\thex(0x4000 | rand(12), 4) + // time_hi_and_version\n\t\t\t\t\t\t'-' +\n\t\t\t\t\t\thex(0x8000 | rand(14), 4) + // clock_seq_hi_and_reserved clock_seq_low\n\t\t\t\t\t\t'-' +\n\t\t\t\t\t\thex(rand(48), 12); // node\n\t};\n\n\t/**\n   * Returns an unsigned x-bit random integer.\n   * @param {int} x A positive integer ranging from 0 to 53, inclusive.\n   * @returns {int} An unsigned x-bit random integer (0 <= f(x) < 2^x).\n   */\n\tUUID._getRandomInt = function (x) {\n\t\tif (x < 0) {\n\t\t\treturn NaN;\n\t\t}\n\t\tif (x <= 30) {\n\t\t\treturn (0 | Math.random() * (1 << x));\n\t\t}\n\t\tif (x <= 53) {\n\t\t\treturn (0 | Math.random() * (1 << 30)) +\n\t\t\t\t\t\t\t\t(0 | Math.random() * (1 << x - 30)) * (1 << 30);\n\t\t}\n\n\t\treturn NaN;\n\t};\n\n\t/**\n   * Returns a function that converts an integer to a zero-filled string.\n   * @param {int} radix\n   * @returns {function(num&#44; length)}\n   */\n\tUUID._getIntAligner = function (radix) {\n\t\treturn function (num, length) {\n\t\t\tlet str = num.toString(radix), i = length - str.length, z = '0';\n\n\t\t\tfor (; i > 0; i >>>= 1, z += z) {\n\t\t\t\tif (i & 1) {\n\t\t\t\t\tstr = z + str;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn str;\n\t\t};\n\t};\n\n\tUUID._hexAligner = UUID._getIntAligner(16);\n\n\t/**\n   * Returns UUID string representation.\n   * @returns {string} {@link UUID#hexString}.\n   */\n\tUUID.prototype.toString = function () {\n\t\treturn this.hexString;\n\t};\n\n\treturn UUID;\n})(UUID);\n\nexport default UUID;\n\n\n\n// WEBPACK FOOTER //\n// ./src/vendor/uuid.js","import arrayUtils from '../utils/array';\nimport tabUtils from '../utils/tab';\nimport WarningTextEnum from '../enums/WarningTextEnum';\nimport PostMessageEventNamesEnum from '../enums/PostMessageEventNamesEnum';\nimport '../utils/customEventPolyfill';\n\nlet PostMessageListener = {};\n\n/*\n * Custom PostMessage Convetions Followed - Sending and Receieving data gracefully\n * -------------------------------------------------------------------------------\n *\n * 1. First convetion\n      Since data can be sent or receieved via postmessge API in the form of strings,\n      the library stores data as stringified JSON object and while reading it, parses the JSON stringified earlier.\n      This is easy to maintain and deal with data.\n\n * 2. Second Convetions\n      With every data, there's an associated message identifier.\n      A message identifier helps in knowing the intention of what event actually is for.\n      For eg: To send data after proper establishment from Child tab,\n      Parent tab acknowledges the connection by returning the true identity of the Child tab.\n      This is done via prepending the Event name i.e. HANDSHAKE_WTIH_PARENT\n\n      So the postmessage's message would like: `HANDSHAKE_WTIH_PARENT{\"id\": 123, \"name\": \"Hello World!\"}`.\n      So, while reading the message, it has to be first checked up with the defined event names\n      and then after successful match, the message is split using the Event-name as a delimiter.\n      The first entry if the event name and the second one is the actual data.\n *\n */\n\n/**\n * OnLoad Event - it serves as an communication establishment source from Child tab\n */\nPostMessageListener._onLoad = (data) => {\n\tlet tabs,\n\t\tdataToSend,\n\t\ttabInfo = data.split(PostMessageEventNamesEnum.LOADED)[1];\n\n\t// Child was opened but parent got refereshed, opened a tab i.e.\n\t// last opened tab will get refreshed(browser behavior). WOW! Handle this now.\n\tif (tabInfo) {\n\t\ttry {\n\t\t\ttabInfo = JSON.parse(tabInfo);\n\t\t\t// If Child knows its UUID, means Parent was refreshed and Child did not\n\t\t\tif (tabInfo.id) {\n\t\t\t\ttabs = tabUtils.getAll();\n\t\t\t\tif (tabs.length) {\n\t\t\t\t\twindow.newlyTabOpened = tabs[tabs.length - 1];\n\t\t\t\t\twindow.newlyTabOpened.id = tabInfo.id;\n\t\t\t\t\twindow.newlyTabOpened.name = tabInfo.name || tabInfo.windowName;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow new Error(WarningTextEnum.INVALID_JSON);\n\t\t}\n\t}\n\n\tif (window.newlyTabOpened) {\n\t\ttry {\n\t\t\tdataToSend = PostMessageEventNamesEnum.HANDSHAKE_WITH_PARENT;\n\t\t\tdataToSend += JSON.stringify({\n\t\t\t\tid: window.newlyTabOpened.id,\n\t\t\t\tname: window.newlyTabOpened.name,\n\t\t\t\tparentName: window.name\n\t\t\t});\n\t\t\ttabUtils.sendMessage(window.newlyTabOpened, dataToSend, tabInfo.isSiteInsideFrame);\n\t\t} catch (e) {\n\t\t\tthrow new Error(WarningTextEnum.INVALID_JSON);\n\t\t}\n\t}\n};\n\n/**\n * onCustomMessage Event - Any sort of custom message by child is treated here\n * @param  {Object} data\n *\n * The method fires an event to notify Parent regarding Child's behavior\n */\nPostMessageListener._onCustomMessage = (data, type) => {\n\tlet event,\n\t\teventData,\n\t\ttabInfo = data.split(type)[1];\n\n\ttry {\n\t\ttabInfo = JSON.parse(tabInfo);\n\t} catch (e) {\n\t\tthrow new Error(WarningTextEnum.INVALID_JSON);\n\t}\n\n\teventData = {\n\t\ttabInfo,\n\t\ttype\n\t};\n\n\tevent = new CustomEvent('onCustomChildMessage', {'detail': eventData});\n\n\twindow.dispatchEvent(event);\n\twindow.newlyTabOpened = null;\n};\n\n/**\n * onBeforeUnload Event - Tells parent that either Child tab was closed or refreshed.\n * Child uses native `ON_BEFORE_UNLOAD` method to notify Parent.\n *\n * It sets the newlyTabOpened variable accordingly\n *\n * @param  {Object} data\n */\nPostMessageListener._onBeforeUnload = (data) => {\n\tlet tabs, tabInfo = data.split(PostMessageEventNamesEnum.ON_BEFORE_UNLOAD)[1];\n\n\ttry {\n\t\ttabInfo = JSON.parse(tabInfo);\n\t} catch (e) {\n\t\tthrow new Error(WarningTextEnum.INVALID_JSON);\n\t}\n\n\tif (tabUtils.tabs.length) {\n\t\ttabs = tabUtils.getAll();\n\t\twindow.newlyTabOpened = arrayUtils.searchByKeyName(tabs, 'id', tabInfo.id) || window.newlyTabOpened;\n\t}\n\n\t// CustomEvent is not supported in IE, but polyfill will take care of it\n\tlet event = new CustomEvent('onChildUnload', {'detail': tabInfo});\n\n\twindow.dispatchEvent(event);\n};\n\n/**\n * onNewTab - It's the entry point for data processing after receiving any postmessage form any Child Tab\n * @param  {Object} message\n */\nPostMessageListener.onNewTab = (message) => {\n\tlet data = message.data;\n\n\t/**\n   * Safe check - This happens when CHild Tab gets closed just after sending a message.\n   * No need to go further from this point.\n   * Tab status is automatically fetched using our polling mechanism written in `Parent.js` file.\n   */\n\tif (!data || typeof data !== 'string' || !tabUtils.tabs.length) {\n\t\treturn false;\n\t}\n\n\t// `origin` check for secureity point of view\n\tif (tabUtils.config.origin && tabUtils.config.origin !== message.origin) {\n\t\treturn false;\n\t}\n\n\tif (data.indexOf(PostMessageEventNamesEnum.LOADED) > -1) {\n\t\tPostMessageListener._onLoad(data);\n\t} else if (data.indexOf(PostMessageEventNamesEnum.CUSTOM) > -1) {\n\t\tPostMessageListener._onCustomMessage(data, PostMessageEventNamesEnum.CUSTOM);\n\t} else if (data.indexOf(PostMessageEventNamesEnum.HANDSHAKE) > -1) {\n\t\tPostMessageListener._onCustomMessage(data, PostMessageEventNamesEnum.HANDSHAKE);\n\t} else if (data.indexOf(PostMessageEventNamesEnum.ON_BEFORE_UNLOAD) > -1) {\n\t\tPostMessageListener._onBeforeUnload(data);\n\t}\n};\n\nexport default PostMessageListener;\n\n\n\n// WEBPACK FOOTER //\n// ./src/event-listeners/postmessage.js","// Polyfill of CustomEvent for IE >= 9\nexport default (() => {\n\tfunction CE(event, params = {}) {\n\t\tlet evt = document.createEvent('CustomEvent');\n\n\t\tevt.initCustomEvent(event, false, false, params.detail);\n\t\treturn evt;\n\t}\n\n\tif (typeof window.CustomEvent !== 'function') {\n\t\tCE.prototype = window.Event.prototype;\n\t\twindow.CustomEvent = CE;\n\t}\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/customEventPolyfill.js","import PostMessageEventNamesEnum from './enums/PostMessageEventNamesEnum';\nimport WarningTextEnum from './enums/WarningTextEnum';\n\n// Named Class expression\nclass Child {\n\t/**\n   * Involed when object is instantiated\n   * Set flags/variables and calls init method to attach event listeners\n   * @param  {Object} config - Refer API/docs for config keys\n   */\n\tconstructor(config) {\n\t\tthis.sessionStorageKey = '__vwo_new_tab_info__';\n\n\t\tif (!config) {\n\t\t\tconfig = {};\n\t\t}\n\t\tif (typeof config.handshakeExpiryLimit === 'undefined') {\n\t\t\tconfig.handshakeExpiryLimit = 5000;\n\t\t}\n\t\tif (typeof config.shouldInitImmediately === 'undefined') {\n\t\t\tconfig.shouldInitImmediately = true;\n\t\t}\n\n\t\tthis.tabName = window.name;\n\t\tthis.tabId = null;\n\t\tthis.tabParentName = null;\n\n\t\tObject.assign(this, config);\n\t\tthis.config = config;\n\n\t\tif (this.shouldInitImmediately) {\n\t\t\tthis.init();\n\t\t}\n\t};\n\n\t/**\n   * Check is sessionStorage is present on window\n   * @return {Boolean} [description]\n   */\n\t_isSessionStorage() {\n\t\tif ('sessionStorage' in window && window.sessionStorage) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n   * Get stored data from sessionStorage\n   * @return {Object} data\n   */\n\t_getData() {\n\t\tif (!this.isSessionStorageSupported) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn window.sessionStorage.getItem(this.sessionStorageKey);\n\t};\n\n\t/**\n   * Set stored data from sessionStorage\n   * @return {Object} data\n   */\n\t_setData(dataReceived) {\n\t\tif (!this.isSessionStorageSupported) {\n\t\t\treturn false;\n\t\t}\n\n\t\twindow.sessionStorage.setItem(this.sessionStorageKey, dataReceived);\n\t\treturn dataReceived;\n\t};\n\n\t/**\n   * Get stored data from sessionStorage and parse it\n   * @return {Object} data\n   */\n\t_restoreData() {\n\t\tif (!this.isSessionStorageSupported) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.isSessionStorageSupported) {\n\t\t\tlet storedData = this._getData();\n\n\t\t\tthis._parseData(storedData);\n\t\t}\n\t};\n\n\t/**\n   * Parse data fetched from sessionStorage\n   * @param  {String} dataReceived\n   */\n\t_parseData(dataReceived) {\n\t\tlet actualData;\n\n\t\t// Expecting JSON data\n\t\ttry {\n\t\t\tactualData = JSON.parse(dataReceived);\n\t\t\tthis.tabId = actualData && actualData.id;\n\t\t\tthis.tabName = actualData && actualData.name;\n\t\t\tthis.tabParentName = actualData && actualData.parentName;\n\t\t} catch (e) {\n\t\t\tthrow new Error(WarningTextEnum.INVALID_DATA);\n\t\t};\n\t};\n\n\t/**\n   * The core of this file\n   * This method receives the postmessage from Parent\n   * after establishing a proper communication channel between Parent tab and Child tab.\n   * It removes the handshake timeout.\n   * Based on the type of postmessage event, it sets/parses or calls user defined callbacks\n   *\n   * @param  {String} message\n   */\n\tonCommunication(message) {\n\t\tlet dataReceived,\n\t\t\tdata = message.data;\n\n\t\tif (!data || typeof data !== 'string') {\n\t\t\treturn;\n\t\t}\n\n\t\t// `origin` check for secureity point of view\n\t\tif (this.config.origin && this.config.origin !== message.origin) {\n\t\t\treturn;\n\t\t}\n\n\t\t// cancel timeout\n\t\twindow.clearTimeout(this.timeout);\n\n\t\t// When Parent tab gets closed or refereshed\n\t\tif (data.indexOf(PostMessageEventNamesEnum.PARENT_DISCONNECTED) > -1) {\n\t\t\t// Call user-defined `onParentDisconnect` callback when Parent tab gets closed or refereshed.\n\t\t\tif (this.config.onParentDisconnect) {\n\t\t\t\tthis.config.onParentDisconnect();\n\t\t\t}\n\n\t\t\t// remove postMessage listener since no Parent is there to communicate with\n\t\t\twindow.removeEventListener('message', evt => this.onCommunication(evt));\n\t\t}\n\n\t\t/**\n     * When Parent sends an Acknowledgement to the Child's request of setting up a communication channel\n     * along with the tab's identity i.e. id, name and it's parent(itself) to the child tab.\n    */\n\t\tif (data.indexOf(PostMessageEventNamesEnum.HANDSHAKE_WITH_PARENT) > -1) {\n\t\t\tlet msg;\n\n\t\t\tdataReceived = data.split(PostMessageEventNamesEnum.HANDSHAKE_WITH_PARENT)[1];\n\n\t\t\t// Set data to sessionStorage so that when page reloads it can directly read the past info till the session lives\n\t\t\tthis._setData(dataReceived);\n\t\t\tthis._parseData(dataReceived);\n\n\t\t\tmsg = {\n\t\t\t\tid: this.tabId,\n\t\t\t\tisSiteInsideFrame: this.config.isSiteInsideFrame\n\t\t\t};\n\t\t\tthis.sendMessageToParent(msg, PostMessageEventNamesEnum.HANDSHAKE);\n\n\t\t\tif (this.config.onInitialize) {\n\t\t\t\tthis.config.onInitialize();\n\t\t\t}\n\t\t}\n\n\t\t// Whenever Parent tab communicates once the communication channel is established\n\t\tif (data.indexOf(PostMessageEventNamesEnum.PARENT_COMMUNICATED) > -1) {\n\t\t\tdataReceived = data.split(PostMessageEventNamesEnum.PARENT_COMMUNICATED)[1];\n\n\t\t\ttry {\n\t\t\t\tdataReceived = JSON.parse(dataReceived);\n\t\t\t} catch (e) {\n\t\t\t\tthrow new Error(WarningTextEnum.INVALID_JSON);\n\t\t\t}\n\t\t\t// Call user-defined `onParentCommunication` callback when Parent sends a message to Parent tab\n\t\t\tif (this.config.onParentCommunication) {\n\t\t\t\tthis.config.onParentCommunication(dataReceived);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n   * Attach postmessage and onbeforeunload event listeners\n   */\n\taddListeners() {\n\t\twindow.onbeforeunload = (evt) => {\n\t\t\tlet msg = {\n\t\t\t\tid: this.tabId,\n\t\t\t\tisSiteInsideFrame: this.config.isSiteInsideFrame\n\t\t\t};\n\n\t\t\tthis.sendMessageToParent(msg, PostMessageEventNamesEnum.ON_BEFORE_UNLOAD);\n\t\t};\n\n\t\twindow.removeEventListener('message', evt => this.onCommunication(evt));\n\t\twindow.addEventListener('message', evt => this.onCommunication(evt));\n\t};\n\n\t/**\n   * Call a user-defined method `onHandShakeExpiry`\n   * if the Parent doesn't recieve a first handshake message within the configurable `handshakeExpiryLimit`\n   * @return {Function}\n   */\n\tsetHandshakeExpiry() {\n\t\treturn window.setTimeout(() => {\n\t\t\tif (this.config.onHandShakeExpiry) {\n\t\t\t\tthis.config.onHandShakeExpiry();\n\t\t\t}\n\t\t}, this.handshakeExpiryLimit);\n\t}\n\n\t/**\n   * API starts here ->\n   *\n   * Send a postmessage to the corresponding Parent tab\n   * @param  {String} msg\n=   */\n\tsendMessageToParent(msg, _prefixType) {\n\t\tlet origin;\n\n\t\tlet type = _prefixType || PostMessageEventNamesEnum.CUSTOM;\n\n\t\tmsg = type + JSON.stringify(msg);\n\n\t\tif (window.top.opener) {\n\t\t\torigin = this.config.origin || '*';\n\t\t\twindow.top.opener.postMessage(msg, origin);\n\t\t}\n\t};\n\n\t/**\n   * Get current Tab info i.e. id, name and parentName\n   * @return {Object} tab-info\n   */\n\tgetTabInfo() {\n\t\treturn {\n\t\t\tid: this.tabId,\n\t\t\tname: this.tabName,\n\t\t\tparentName: this.tabParentName,\n\t\t\tisSiteInsideFrame: this.config.isSiteInsideFrame\n\t\t};\n\t};\n\t/**\n   * API ends here ->\n   */\n\n\t/**\n   * Invoked on object instantiation unless user pass a key to call it explicitly\n   */\n\tinit() {\n\t\tthis.isSessionStorageSupported = this._isSessionStorage();\n\t\tthis.addListeners();\n\t\tthis._restoreData();\n\t\tthis.sendMessageToParent(this.getTabInfo(), PostMessageEventNamesEnum.LOADED);\n\t\tthis.timeout = this.setHandshakeExpiry();\n\n\t\tif (this.config.onReady) {\n\t\t\tthis.config.onReady();\n\t\t}\n\t}\n};\n\nexport default Child;\n\n\n\n// WEBPACK FOOTER //\n// ./src/child.js"],"sourceRoot":""}